<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>
</head>

<body>
	行：<input type="text" id='row' />
	列：<input type="text" id='col' />
	<input type="button" value="创建" id="btn" />
	<div id="box"></div>


	<script>
		//监听元素
		var row = document.getElementById("row")
		var col = document.getElementById("col")
		var btn = document.getElementById("btn")
		var box = document.getElementById("box")

		// var str = ""
		var trNum = 0
		var tdNum = 0
		//生成表格
			function printTable() {
				// str += "<table>"
				var table = document.createElement("table")
				box.appendChild(table)
				for (var i = 0; i < row.value; i++) {
					// str += "<tr>"
					var tr = document.createElement("tr")
					table.appendChild(tr)
					for (var j = 0; j < col.value; j++) {
						/* str += "<td>"
						str += tdNum
						str += "</td>" */
						var td = document.createElement("td")
						td.innerHTML = tdNum
						tr.appendChild(td)
						tdNum++
					}
					// str += "<td><a href='#'>删除</a></td>"
					// str += "</tr>"
					var td2 = document.createElement("td")
					td2.innerHTML = "删除"
					td2.className="del"
					tr.appendChild(td2)
					trNum++
					// console.log(trNum)
				}
				// str += "</table>"
				// box.innerHTML = str
				// console.log(tdNum)
				// console.log(str)

				//设置样式
				var tab = document.querySelector("table")
				// var tr = document.getElementsByTagName("tr")
				var td = document.getElementsByTagName("td")
				console.log(tr)
				console.log(td)

				tab.style.border = "1px solid #333"

				for (var n = 0; n < tdNum + trNum; n++) {
					td[n].style.border = "1px solid #333"

					// 设置背景颜色
					td[n].style.backgroundColor = getColor()
				}

				// 给a标签添加功能(未生效)
				// var tr = tab.children
				// console.log(tr)
				// var a = document.getElementsByTagName("a")
				// console.log(a)

				// 给del添加功能

				var tdlist = document.getElementsByClassName("del")
						console.log(tdlist)
				for(var j=0;j<tdlist.length;j++){
					// if (tdlist[j].value === "删除") {
						tdlist[j].onclick = function () {
							var tr = this.parentNode
							tr.parentNode.removeChild(tr)
							//  this.remove()
							// tab.deleteRow(tr.value-1)
						// }
					}
					}
				}
			

	    //添加点击事件
		btn.onclick = function () {
			printTable()
		}
	

		// 生成随机颜色的函数
		function getColor() {
			var color = "#"
			for (var i = 0; i < 6; i++) {
				var randnum = Math.round(Math.random() * 15)
				// console.log(randnum)
				color += randnum.toString(16)
			};
			return color;
		}
			// console.log(getColor())

	</script>
</body>

</html>