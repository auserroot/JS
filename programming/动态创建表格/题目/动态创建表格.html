<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>
</head>

<body>
	行：<input type="text" id='row' />
	列：<input type="text" id='col' />
	<input type="button" value="创建" id="btn" />
	<div id="box"></div>


	<script>
		//监听元素
		var row = document.getElementById("row")
		var col = document.getElementById("col")
		var btn = document.getElementById("btn")
		var box = document.getElementById("box")

		var str = ""
		var trNum = 0
		var tdNum = 0
		//生成表格
			function printTable() {
				str += "<table>"

				for (var i = 0; i < row.value; i++) {
					str += "<tr>"
					for (var j = 0; j < col.value; j++) {
						str += "<td>"
						str += tdNum
						str += "</td>"
						tdNum++
					}
					str += "<td><a href='#'>删除</a></td>"
					str += "</tr>"
					trNum++
					// console.log(trNum)
				}
				str += "</table>"
				box.innerHTML = str
				console.log(tdNum)
				// console.log(str)

				//设置样式
				var tab = document.querySelector("table")
				var tr = document.getElementsByTagName("tr")
				var td = document.getElementsByTagName("td")
				// console.log(tr)
				// console.log(td)

				tab.style.border = "1px solid #333"

				for (var n = 0; n < tdNum + trNum; n++) {
					td[n].style.border = "1px solid #333"

					// 设置背景颜色
					td[n].style.backgroundColor = getColor()
				}

				// 给a标签添加功能(未生效)
				var tbody = tab.children
				console.log(tbody)
				var a = document.getElementsByTagName("a")
				console.log(a)
				tbody.onclick = function () {
					for(var j=0;j<a.length;j++){
						var tr = a[j].parentNode.parentNode
						if (a[j].value === "删除") {
							// tbody.removeChild(this.parentNode.parentNode)
							tr.remove()
							// tab.deleteRow(tr.value-1)
						}
					}
					}
				}
			

	    //添加点击事件
		btn.onclick = function () {
			printTable()
		}
	

		// 生成随机颜色的函数
		function getColor() {
			var color = "#"
			for (var i = 0; i < 6; i++) {
				var randnum = Math.round(Math.random() * 15)
				// console.log(randnum)
				color += randnum.toString(16)
			};
			return color;
		}
			// console.log(getColor())

	</script>
</body>

</html>